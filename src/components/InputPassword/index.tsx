import { forwardRef, type InputHTMLAttributes } from 'react'
import { Link } from 'react-router-dom'
import { PATH } from '../../constants/path'

interface InputPasswordPropTypes extends InputHTMLAttributes<HTMLInputElement> {
  classNameWrap: string
  label: string
  register: any
  classNameInput: string
  classNameLabel: string
  classNameError: string
  classNameErrorMessage: string
  errors: any
  errorMessage: string
  isShow: boolean
  isHidden?: string
  handleShow?: (e: React.MouseEvent<HTMLButtonElement>) => void
}

const InputPassword = forwardRef<HTMLInputElement, InputPasswordPropTypes>(
  (
    {
      classNameWrap,
      label,
      register,
      classNameInput,
      classNameLabel,
      classNameError,
      classNameErrorMessage,
      errors,
      name,
      type,
      errorMessage,
      placeholder,
      isShow,
      isHidden = 'hidden',
      handleShow
    },
    ref
  ) => {
    return (
      <div>
        <div className={classNameWrap}>
          <label className={classNameLabel}>{label}</label>
          <Link to={PATH.FORGOT_PASSWORD} className={`text-primary text-sm hover:underline ${isHidden}`}>
            Quên mật khẩu?
          </Link>
        </div>
        <div className='h-10 flex items-center gap-2 border border-solid border-[#B3B3B3] rounded-lg focus-within:ring-2 focus-within:ring-blue-500'>
          <input {...register(name)} ref={ref} type={type} placeholder={placeholder} className={classNameInput} />
          <button type='button' onClick={handleShow} className='pl-1 py-3 pr-3'>
            {isShow ? (
              <svg xmlns='http://www.w3.org/2000/svg' width='20' height='16' viewBox='0 0 20 16' fill='none'>
                <path
                  d='M19.8122 14.7185L1.12527 0.109928C1.07402 0.0688916 1.01518 0.038352 0.952123 0.0200534C0.889065 0.00175471 0.823021 -0.00394465 0.75776 0.00328069C0.6925 0.010506 0.629302 0.0305146 0.571775 0.0621639C0.514247 0.0938132 0.463517 0.136484 0.42248 0.187739L0.10999 0.578039C0.0688564 0.629312 0.0382372 0.688192 0.0198841 0.751311C0.00153093 0.81443 -0.00419592 0.880548 0.0030312 0.945882C0.0102583 1.01122 0.0302976 1.07448 0.0620023 1.13207C0.093707 1.18965 0.136455 1.24041 0.1878 1.28146L18.8747 15.8901C18.926 15.9311 18.9848 15.9616 19.0479 15.9799C19.1109 15.9982 19.177 16.0039 19.2422 15.9967C19.3075 15.9895 19.3707 15.9695 19.4282 15.9378C19.4858 15.9062 19.5365 15.8635 19.5775 15.8123L19.89 15.422C19.9311 15.3707 19.9618 15.3118 19.9801 15.2487C19.9985 15.1856 20.0042 15.1195 19.997 15.0541C19.9897 14.9888 19.9697 14.9255 19.938 14.8679C19.9063 14.8104 19.8635 14.7596 19.8122 14.7185ZM9.27471 4.57729L13.4868 7.87032C13.4174 5.99725 11.8899 4.50011 10 4.50011C9.75621 4.50056 9.51313 4.52643 9.27471 4.57729ZM10.7253 11.423L6.51323 8.13C6.58292 10.0028 8.11037 11.4999 10 11.4999C10.2438 11.4994 10.4868 11.4736 10.7253 11.423ZM10 3.50014C13.0827 3.50014 15.9089 5.21883 17.4351 8C17.061 8.68447 16.5987 9.31693 16.0601 9.88119L17.2395 10.803C17.8961 10.1006 18.4524 9.31077 18.8925 8.45592C18.964 8.31452 19.0013 8.15829 19.0013 7.99984C19.0013 7.8414 18.964 7.68517 18.8925 7.54376C17.1963 4.2373 13.8414 2.00018 10 2.00018C8.85316 2.00018 7.75913 2.21893 6.73041 2.58798L8.18068 3.72201C8.77254 3.58763 9.37877 3.50014 10 3.50014ZM10 12.4999C6.91728 12.4999 4.09143 10.7812 2.56491 8C2.93952 7.31554 3.40231 6.68318 3.94144 6.11912L2.7621 5.19727C2.1056 5.89959 1.54941 6.68934 1.10933 7.54408C1.03785 7.68548 1.0006 7.84171 1.0006 8.00016C1.0006 8.1586 1.03785 8.31483 1.10933 8.45624C2.80397 11.7627 6.15887 13.9998 10 13.9998C11.1468 13.9998 12.2409 13.7795 13.2696 13.412L11.8193 12.2783C11.2275 12.4124 10.6215 12.4999 10 12.4999Z'
                  fill='#1A1A1A'
                />
              </svg>
            ) : (
              <svg xmlns='http://www.w3.org/2000/svg' width='20' height='14' viewBox='0 0 20 14' fill='none'>
                <path
                  d='M10 3.11103C9.63199 3.11679 9.2667 3.17525 8.91528 3.28465C9.07783 3.57052 9.16438 3.8933 9.16667 4.22215C9.16667 4.4775 9.11637 4.73034 9.01865 4.96626C8.92093 5.20217 8.77771 5.41652 8.59715 5.59708C8.41659 5.77764 8.20224 5.92087 7.96632 6.01858C7.73041 6.1163 7.47757 6.1666 7.22222 6.1666C6.89336 6.16431 6.57059 6.07776 6.28471 5.91521C6.05917 6.69743 6.08546 7.53079 6.35985 8.29724C6.63425 9.06369 7.14284 9.72438 7.8136 10.1857C8.48435 10.6471 9.28325 10.8857 10.0971 10.8677C10.911 10.8498 11.6987 10.5762 12.3484 10.0858C12.9982 9.59537 13.4772 8.91293 13.7176 8.13514C13.958 7.35734 13.9475 6.52363 13.6877 5.75211C13.428 4.98058 12.932 4.31034 12.2702 3.83633C11.6083 3.36233 10.8141 3.10858 10 3.11103ZM19.8792 6.49299C17.9962 2.81902 14.2684 0.333252 10 0.333252C5.73159 0.333252 2.00276 2.82076 0.120815 6.49333C0.0413845 6.65045 0 6.82405 0 7.0001C0 7.17616 0.0413845 7.34976 0.120815 7.50688C2.0038 11.1808 5.73159 13.6666 10 13.6666C14.2684 13.6666 17.9972 11.1791 19.8792 7.50653C19.9586 7.34941 20 7.17582 20 6.99976C20 6.8237 19.9586 6.65011 19.8792 6.49299ZM10 11.9999C6.57465 11.9999 3.43436 10.0902 1.73853 6.99993C3.43436 3.90965 6.5743 1.99992 10 1.99992C13.4257 1.99992 16.5656 3.90965 18.2615 6.99993C16.566 10.0902 13.4257 11.9999 10 11.9999Z'
                  fill='#1A1A1A'
                />
              </svg>
            )}
          </button>
        </div>
        {errors.password && (
          <div className={classNameError}>
            <svg xmlns='http://www.w3.org/2000/svg' width='15' height='14' viewBox='0 0 15 14' fill='none'>
              <path
                d='M7.49967 0.333252C3.81967 0.333252 0.833008 3.31992 0.833008 6.99992C0.833008 10.6799 3.81967 13.6666 7.49967 13.6666C11.1797 13.6666 14.1663 10.6799 14.1663 6.99992C14.1663 3.31992 11.1797 0.333252 7.49967 0.333252ZM8.16634 10.3333H6.83301V6.33325H8.16634V10.3333ZM8.16634 4.99992H6.83301V3.66659H8.16634V4.99992Z'
                fill='#FF3B30'
              />
            </svg>
            <p className={classNameErrorMessage}>{errorMessage}</p>
          </div>
        )}
      </div>
    )
  }
)

export default InputPassword
